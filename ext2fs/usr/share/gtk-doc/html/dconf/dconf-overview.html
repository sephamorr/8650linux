<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>dconf</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="dconf Reference Manual">
<link rel="up" href="index.html" title="dconf Reference Manual">
<link rel="prev" href="index.html" title="dconf Reference Manual">
<link rel="next" href="ch01.html" title="DConf Client API">
<meta name="generator" content="GTK-Doc V1.19.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle">
<td><a accesskey="p" href="index.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td> </td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">dconf Reference Manual</th>
<td><a accesskey="n" href="ch01.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="dconf-overview"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">dconf</span></h2>
<p>dconf — A configuration systen</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="id-1.2.4"></a><h2>Description</h2>
<p>
      dconf is a simple key/value storage system that is heavily optimised for reading.  This makes it an ideal
      system for storing user preferences (which are read 1000s of times for each time the user changes one).
      It was created with this usecase in mind.
    </p>
<p>
      All preferences are stored in a single large binary file.  Layering of preferences is possible using
      multiple files (ie: for site defaults).  Lock-down is also supported.  The binary file for the defaults
      can optionally be compiled from a set of plain text keyfiles.
    </p>
<p>
      dconf has a partial client/server architecture.  It uses D-Bus.  The server is only involved in writes
      (and is not activated in the user session until the user modifies a preference).  The service is stateless
      and can exit freely at any time (and is therefore robust against crashes).  The list of paths that each
      process is watching is stored within the D-Bus daemon itself (as D-Bus signal match rules).
    </p>
<p>
      Reads are performed by direct access (via mmap) to the on-disk database which is essentially a hashtable.
      For this reason, dconf reads typically involve zero system calls and are comparable to a hashtable lookup
      in terms of speed.  Practically speaking, in simple non-layered setups, dconf is less than 10 times slower
      than GHashTable.
    </p>
<p>
      Writes are assumed only to happen in response to explicit user interaction (like clicking on a checkbox in
      a preferences dialog) and are therefore not optimised at all.  On some file systems, dconf-service will
      call fsync() for every write, which can introduce a latency of up to 100ms.  This latency is hidden by the
      client libraries through a clever "fast" mechanism that records the outstanding changes locally (so they
      can be read back immediately) until the service signals that a write has completed.
    </p>
</div>
<div class="refsect1">
<a name="id-1.2.5"></a><h2>Portability</h2>
<p>
      dconf mostly targets Free Software operating systems.  It will theoretically run on Mac OS but there isn't
      much point to that (since Mac OS applications want to store preferences in plist files).  It is not
      possible to use dconf on Windows because of the inability to rename over a file that's still in use (which
      is what the dconf-service does on every write).
    </p>
</div>
<div class="refsect1">
<a name="id-1.2.6"></a><h2>API stability</h2>
<p>
      The dconf API is not particularly friendly, and is not guaranteed to be stable.  Because of this and the
      lack of portability, you almost certainly want to use some sort of wrapper API around it.  The wrapper API
      used by GTK+ and GNOME applications is
      <a class="ulink" href="http://developer.gnome.org/gio/stable/GSettings.html" target="_top">GSettings</a>, which is included as
      part of GLib. GSettings has backends for Windows (using the registry) and Mac OS (using property lists) as
      well as its dconf backend and is the proper API to use for graphical applications.
    </p>
</div>
<div class="refsect1">
<a name="id-1.2.7"></a><h2>See Also</h2>
<p>
      <span class="citerefentry"><span class="refentrytitle">dconf-service</span>(1)</span>,
      <span class="citerefentry"><span class="refentrytitle">dconf-editor</span>(1)</span>,
      <span class="citerefentry"><span class="refentrytitle">dconf</span>(1)</span>,
      <a class="ulink" href="http://developer.gnome.org/gio/stable/GSettings.html" target="_top">GSettings</a>
    </p>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.19.1</div>
</body>
</html>